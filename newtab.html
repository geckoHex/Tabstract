<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>New Tab</title>
    <link rel="stylesheet" href="styles/base.css">
    <link rel="stylesheet" href="styles/top-right-island.css">
    <link rel="stylesheet" href="styles/search/search-container.css">
    <link rel="stylesheet" href="styles/search/search-controls.css">
    <link rel="stylesheet" href="styles/quick-links.css">
    <link rel="stylesheet" href="styles/modals.css">
    <link rel="stylesheet" href="styles/icon-picker.css">
    <link rel="stylesheet" href="styles/theme.css">
    <link rel="stylesheet" href="styles/settings-general.css">
    <link rel="stylesheet" href="styles/settings-advanced.css">
    <link rel="stylesheet" href="styles/toast.css">
    <link rel="stylesheet" href="styles/search-warning.css">
    <link rel="stylesheet" href="styles/saved-links.css">
    <!-- Favicon -->
    <link rel="icon" href="public/icons/tabs.svg" type="image/svg+xml">
    <link rel="shortcut icon" href="public/icons/tabs.svg">
    <link rel="mask-icon" href="public/icons/tabs.svg" color="#181926">
    <meta name="theme-color" content="#181926">
</head>
<body>
    <!-- Top right island -->
    <div class="top-right-island">
        <button id="savedLinksBtn" class="island-btn" title="Saved Links">
            <img src="public/icons/clock-counter-clockwise.svg" alt="Saved Links" class="island-icon" />
        </button>
        <button id="newLinkBtn" class="island-btn" title="Add New Link">
            <img src="public/icons/plus-square.svg" alt="Add Link" class="island-icon" />
        </button>
        <button id="themeBtn" class="island-btn" title="Theme">
            <img src="public/icons/paint-brush-household.svg" alt="Theme" class="island-icon" />
        </button>
        <button id="settingsBtn" class="island-btn" title="Settings">
            <img src="public/icons/sliders-horizontal.svg" alt="Settings" class="island-icon" />
        </button>
    </div>

    <div class="container">
        <div class="intro-bar">
            <div id="greeting" class="greeting-text"></div>
            <div id="clock" class="clock-display"></div>
        </div>
        <div class="search-container">
            <form id="searchForm" class="search-form">
                <div class="search-input-wrapper">
                    <button type="submit" class="search-button">
                        <img src="public/icons/magnifying-glass.svg" alt="Search" class="search-icon" />
                    </button>
                    <input
                        type="text"
                        id="searchInput"
                        class="search-input"
                        placeholder="Search the web..."
                        autocomplete="off"
                    />
                    <button
                        type="button"
                        id="searchFilterToggle"
                        class="search-filter-toggle"
                        aria-haspopup="true"
                        aria-expanded="false"
                        title="Filter search results"
                    >
                        <span class="search-filter-toggle-icon" aria-hidden="true" data-icon="sliders-horizontal"></span>
                        <span class="search-filter-toggle-label" hidden></span>
                    </button>
                    <div
                        id="searchFilterMenu"
                        class="search-filter-menu"
                        role="menu"
                        aria-label="Search filters"
                        hidden
                    ></div>
                    <div class="search-hint">⏎ Google | ⌘⏎ ChatGPT</div>
                </div>
            </form>
        </div>

        <!-- Quick Links Section -->
        <div class="quick-links-section">
            <div class="quick-links-header">
                <!-- <h2>Quick Links</h2> -->
            </div>
            <div id="quickLinksContainer" class="quick-links-container">
                <!-- Links will be dynamically added here -->
            </div>
        </div>
    </div>

    <!-- Modal for adding new links -->
    <div id="linkModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>Add New Link</h3>
                <button id="closeModal" class="close-btn">&times;</button>
            </div>
            <form id="linkForm">
                <div class="form-group">
                    <label for="linkTitle">Title</label>
                    <input type="text" id="linkTitle" placeholder="Enter link title" required />
                </div>
                <div class="form-group">
                    <label for="linkUrl">URL</label>
                    <input type="url" id="linkUrl" placeholder="https://example.com" required />
                    <div id="urlSuggestion" class="url-suggestion" style="display: none;">
                        <span class="url-suggestion-text">Did you mean: </span>
                        <button type="button" id="urlSuggestionBtn" class="url-suggestion-btn"></button>
                    </div>
                </div>
                <div class="form-group">
                    <label>Icon</label>
                    <div id="iconPicker" class="icon-picker">
                        <!-- Icons will be dynamically populated here -->
                    </div>
                </div>
                <div class="modal-actions">
                    <button type="button" id="cancelBtn" class="btn btn-cancel">Cancel</button>
                    <button type="submit" class="btn btn-primary">Add Link</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Theme Modal -->
    <div id="themeModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>Theme Settings</h3>
                <button class="close-btn modal-close" data-modal="themeModal">&times;</button>
            </div>
            <div class="theme-options">
                <div class="theme-section">
                    <h4>Color Scheme</h4>
                    <div class="theme-grid">
                        <button class="theme-option" data-theme="light">
                            <div class="theme-preview light-preview"></div>
                            <span>Light</span>
                        </button>
                        <button class="theme-option" data-theme="dark">
                            <div class="theme-preview dark-preview"></div>
                            <span>Dark</span>
                        </button>
                        <button class="theme-option" data-theme="auto">
                            <div class="theme-preview auto-preview"></div>
                            <span>Auto</span>
                        </button>
                    </div>
                </div>
                <div class="theme-section">
                    <h4>Accent Color</h4>
                    <div class="color-grid">
                        <button class="color-option" data-color="#007bff" style="background: #007bff;"></button>
                        <button class="color-option" data-color="#28a745" style="background: #28a745;"></button>
                        <button class="color-option" data-color="#dc3545" style="background: #dc3545;"></button>
                        <button class="color-option" data-color="#ffc107" style="background: #ffc107;"></button>
                        <button class="color-option" data-color="#17a2b8" style="background: #17a2b8;"></button>
                        <button class="color-option" data-color="#6f42c1" style="background: #6f42c1;"></button>
                        <button class="color-option" data-color="#fd7e14" style="background: #fd7e14;"></button>
                        <button class="color-option" data-color="#e83e8c" style="background: #e83e8c;"></button>
                    </div>
                    <div class="theme-slider">
                        <label for="backgroundImageOpacity" class="slider-label">
                            Background image clarity
                            <span id="backgroundImageOpacityValue">100%</span>
                        </label>
                        <input type="range" id="backgroundImageOpacity" min="0" max="100" value="100" />
                    </div>
                </div>
                <div class="theme-section">
                    <h4>Background Image</h4>
                    <div class="background-grid">
                        <button class="background-option" data-background="none">
                            <div class="background-preview" style="background: var(--bg-primary);"></div>
                            <span>None</span>
                        </button>
                        <button class="background-option" data-background="white">
                            <div class="background-preview" style="background: #ffffff;"></div>
                            <span>White</span>
                        </button>
                        <button class="background-option" data-background="black">
                            <div class="background-preview" style="background: #000000;"></div>
                            <span>Black</span>
                        </button>
                        <button class="background-option" data-background="public/background-art/banannas.png">
                            <div class="background-preview" style="background-image: url('public/background-art/banannas.png'); background-size: cover; background-position: center;"></div>
                            <span>Bananas</span>
                        </button>
                        <button class="background-option" data-background="public/background-art/moon-beach.png">
                            <div class="background-preview" style="background-image: url('public/background-art/moon-beach.png'); background-size: cover; background-position: center;"></div>
                            <span>Moon Beach</span>
                        </button>
                        <button class="background-option" data-background="public/background-art/office.png">
                            <div class="background-preview" style="background-image: url('public/background-art/office.png'); background-size: cover; background-position: center;"></div>
                            <span>Office</span>
                        </button>
                        <button class="background-option" data-background="public/background-art/retro-airport.png">
                            <div class="background-preview" style="background-image: url('public/background-art/retro-airport.png'); background-size: cover; background-position: center;"></div>
                            <span>Retro Airport</span>
                        </button>
                        <button class="background-option" data-background="public/background-art/underwater-dome.png">
                            <div class="background-preview" style="background-image: url('public/background-art/underwater-dome.png'); background-size: cover; background-position: center;"></div>
                            <span>Underwater Dome</span>
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Settings Modal -->
    <div id="settingsModal" class="modal">
        <div class="modal-content settings-modal-content">
            <div class="modal-header">
                <h3>Settings</h3>
                <button class="close-btn modal-close" data-modal="settingsModal">&times;</button>
            </div>
            <div class="settings-content-wrapper">
                <div class="settings-left">
                    <div class="settings-content">
                        <div class="setting-group">
                            <label for="userName">Display name</label>
                            <input type="text" id="userName" class="setting-input" placeholder="Add your name" maxlength="40" />
                        </div>
                        <div class="setting-group">
                            <label class="setting-toggle-label">
                                <span>Type anywhere</span>
                                <label class="toggle-switch">
                                    <input type="checkbox" id="typeAnywhere" class="toggle-input" checked />
                                    <span class="toggle-slider"></span>
                                </label>
                            </label>
                        </div>
                        <div class="setting-group">
                            <label class="setting-toggle-label">
                                <span>Open links in new tab</span>
                                <label class="toggle-switch">
                                    <input type="checkbox" id="openLinksNewTab" class="toggle-input" />
                                    <span class="toggle-slider"></span>
                                </label>
                            </label>
                        </div>
                        <div class="setting-group">
                            <label class="setting-toggle-label">
                                <span>Show search hint</span>
                                <label class="toggle-switch">
                                    <input type="checkbox" id="showSearchHint" class="toggle-input" checked />
                                    <span class="toggle-slider"></span>
                                </label>
                            </label>
                        </div>
                        <div class="setting-group">
                            <label class="setting-toggle-label">
                                <span>Check for updates</span>
                                <label class="toggle-switch">
                                    <input type="checkbox" id="checkForUpdates" class="toggle-input" disabled />
                                    <span class="toggle-slider"></span>
                                </label>
                            </label>
                        </div>
                        <div class="setting-group">
                            <label for="faviconLoadMode">Favicon load mode</label>
                            <div class="custom-select-wrapper">
                                <select id="faviconLoadMode" class="custom-select">
                                    <option value="immediate">Immediately</option>
                                    <option value="delayed" selected>After delay (1.5s)</option>
                                    <option value="manual">After pressing Enter</option>
                                </select>
                                <span class="custom-select-arrow">
                                    <svg width="12" height="12" viewBox="0 0 12 12" fill="none" xmlns="http://www.w3.org/2000/svg">
                                        <path d="M2.5 4.5L6 8L9.5 4.5" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
                                    </svg>
                                </span>
                            </div>
                        </div>
                        <div class="setting-group config-actions">
                            <label>Configuration</label>
                            <p class="config-actions-description">Export or import your Tabstract setup.</p>
                            <div class="config-actions-buttons">
                                <button type="button" id="exportConfigBtn" class="config-action-btn">
                                    <img src="public/icons/download-simple.svg" alt="" aria-hidden="true" />
                                    <span>Export config</span>
                                </button>
                                <button type="button" id="importConfigBtn" class="config-action-btn">
                                    <img src="public/icons/upload-simple.svg" alt="" aria-hidden="true" />
                                    <span>Import config</span>
                                </button>
                            </div>
                            <input type="file" id="configImportInput" accept="application/json" hidden />
                        </div>
                    </div>
                </div>
                <div class="settings-right">
                    <div class="blocked-terms-section">
                        <h4>Blocked Search Terms</h4>
                        <p class="blocked-terms-description">Add terms that will trigger a warning when searching</p>
                        <div class="blocked-terms-input-wrapper">
                            <input type="text" id="blockedTermInput" class="setting-input" placeholder="Enter a term to block..." maxlength="50" />
                            <button id="addBlockedTermBtn" class="btn btn-primary btn-small">Add</button>
                        </div>
                        <div id="blockedTermsList" class="blocked-terms-list">
                            <!-- Blocked terms will be dynamically added here -->
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Search Warning Modal -->
    <div id="searchWarningModal" class="modal warning-modal">
        <div class="modal-content warning-modal-content">
            <div class="warning-header">
                <img src="public/icons/flag.svg" alt="Warning" class="warning-icon" />
                <h3 class="warning-title">Search Warning</h3>
            </div>
            <p class="warning-message">Your search contains blocked terms. Are you sure you want to continue?</p>
            <div class="warning-terms-container">
                <strong>Blocked terms found:</strong>
                <div id="warningTermsList" class="warning-terms-list"></div>
            </div>
            <div class="modal-actions warning-actions">
                <button id="warningBackBtn" class="btn btn-primary btn-large">Back</button>
                <button id="warningSearchAnywayBtn" class="btn-text btn-large">Search Anyway</button>
            </div>
        </div>
    </div>

    <!-- Saved Links Modal -->
    <div id="savedLinksModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>Saved Links</h3>
                <button class="close-btn modal-close" data-modal="savedLinksModal">&times;</button>
            </div>
            <div class="saved-links-content">
                <div class="saved-links-input-section">
                    <div class="form-group">
                        <label for="savedLinkUrl">Paste a link to save for later</label>
                        <div class="saved-link-input-wrapper">
                            <input type="url" id="savedLinkUrl" placeholder="https://example.com" />
                            <button type="button" id="saveLinkBtn" class="btn btn-primary">Save</button>
                        </div>
                    </div>
                </div>
                <div class="saved-links-list-section">
                    <div id="savedLinksList" class="saved-links-list">
                        <!-- Saved links will be dynamically added here -->
                    </div>
                    <div id="savedLinksEmpty" class="saved-links-empty">
                        <img src="public/icons/clock-counter-clockwise.svg" alt="No saved links" class="empty-icon" />
                        <p>No saved links yet</p>
                        <p class="empty-subtitle">Paste links above to save them for later</p>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Toast notification -->
    <div id="toast" class="toast"></div>

    <div id="updateToast" class="update-toast" hidden>
        <button type="button" id="updateToastButton" class="update-toast-button">
            <img src="public/icons/package.svg" alt="" class="update-toast-icon" />
            <span class="update-toast-text">Updates available</span>
        </button>
    </div>

    <div id="updateInstructionsModal" class="modal">
        <div class="modal-content update-modal-content">
            <div class="modal-header">
                <h3>Update Available</h3>
                <button class="close-btn modal-close" data-modal="updateInstructionsModal">&times;</button>
            </div>
            <div class="update-modal-body">
                <p>To update Tabstract, open the folder where you cloned the extension and run:</p>
                <pre><code>git fetch</code></pre>
                <p>After fetching, reload the extension from <code>chrome://extensions</code> so the new version is applied.</p>
            </div>
        </div>
    </div>

    <script defer src="scripts/core/app-bootstrap.js"></script>
    <script defer src="scripts/ui/toast.js"></script>
    <script defer src="scripts/ui/modals.js"></script>
    <script defer src="scripts/search/shortcut-menu.js"></script>
    <script defer src="scripts/search/search-filters.js"></script>
    <script defer src="scripts/search/type-anywhere.js"></script>
    <script defer src="scripts/search/search-core.js"></script>
    <script defer src="scripts/settings/settings.js"></script>
    <script defer src="scripts/settings/config-export.js"></script>
    <script defer src="scripts/settings/config-import.js"></script>
    <script defer src="scripts/update/update-checker.js"></script>
    <script defer src="scripts/theme/theme-core.js"></script>
    <script defer src="scripts/theme/theme-ui.js"></script>
    <script defer src="scripts/theme/greeting-data.js"></script>
    <script defer src="scripts/theme/greeting.js"></script>
    <script defer src="scripts/quick-links/quick-links-storage.js"></script>
    <script defer src="scripts/quick-links/icon-picker.js"></script>
    <script defer src="scripts/quick-links/quick-links-core.js"></script>
    <script defer src="scripts/quick-links/quick-links-render.js"></script>
    <script defer src="scripts/quick-links/quick-links-dnd.js"></script>
    <script defer src="scripts/quick-links/quick-links-context.js"></script>
    <script defer src="scripts/saved-links/saved-links-metadata.js"></script>
    <script defer src="scripts/saved-links/saved-links-storage.js"></script>
    <script defer src="scripts/saved-links/saved-links-ui.js"></script>
    <script defer src="scripts/events/search-events.js"></script>
    <script defer src="scripts/events/theme-events.js"></script>
    <script defer src="scripts/events/settings-events.js"></script>
    <script defer src="scripts/events/link-form-events.js"></script>
    <script defer src="scripts/events/modal-events.js"></script>
    <script defer src="scripts/events/favicon-events.js"></script>
    <script defer src="scripts/events/blocked-terms-events.js"></script>
    <script defer src="scripts/events/search-warning-events.js"></script>
    <script defer src="scripts/events/saved-links-events.js"></script>
    <script defer src="scripts/events/keyboard-events.js"></script>
    <script defer src="scripts/events/setup-event-listeners.js"></script>
</body>
</html>
